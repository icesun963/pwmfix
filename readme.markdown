## 步进电机PWM失步修复

> 通过一个光电编码器连接到步进电机上，通过Arduino控制转发PWM控制电机。
> 期望当电机失布的时候，进行缓慢的补偿，或者在往回走的时候，跳过一些脉冲信号。
> 来让步进电机重新移动到正确的位置。
> 

#### 器材清单

    1.arduino nano（其他不限，我基于这个）
    2.光电编码器，（与需要监控的步进电机连接）
    3.你可能需要联轴器，或者同步轮
    4.一个4899驱动拦截板
    
#### 原理

    arduino通过中断，读取原本输入的pwm信号，再输送到4899驱动板子上。
    实现初步的PWM转发。
    光电编码器则进行监控，假设获得的记步，和实际收到的pwm计步，有一定的偏差。
    通过闲时，慢慢补发。
    忙时，跳过部分pwm信号，重新回到驱动的位置。
    理论上即便丢失一小部分，或者因外力影响，走到了一个比较奇怪的位置。
    依然可以纠正并返回到正确的坐标。


#### 电路图

#### 其他
    
    